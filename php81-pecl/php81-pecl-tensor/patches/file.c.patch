--- a/ext/kernel/file.c	2021-11-01 08:34:17.000000000 +0900
+++ b/ext/kernel/file.c	2022-01-30 15:05:31.672368345 +0900
@@ -60,12 +60,14 @@
 int zephir_file_exists(zval *filename)
 {
 	zval return_value;
-
+	zend_string *ret;
+	
 	if (Z_TYPE_P(filename) != IS_STRING) {
 		return FAILURE;
 	}
-
-	php_stat(Z_STRVAL_P(filename), (php_stat_len) Z_STRLEN_P(filename), FS_EXISTS, &return_value);
+	
+	ret = php_basename(Z_STRVAL_P(filename), Z_STRLEN_P(filename), NULL, 0);
+	php_stat(ret, FS_EXISTS, &return_value);
 
 	if (Z_TYPE(return_value) != IS_TRUE) {
 		return FAILURE;
@@ -287,8 +289,10 @@
 
 void zephir_filemtime(zval *return_value, zval *path)
 {
+		zend_string *ret;
+		ret = php_basename(Z_STRVAL_P(path), Z_STRLEN_P(path), NULL, 0);
 	if (EXPECTED(Z_TYPE_P(path) == IS_STRING)) {
-		php_stat(Z_STRVAL_P(path), (php_stat_len)(Z_STRLEN_P(path)), FS_MTIME, return_value);
+		php_stat(ret, FS_MTIME, return_value);
 	} else {
 		ZVAL_FALSE(return_value);
 	}

